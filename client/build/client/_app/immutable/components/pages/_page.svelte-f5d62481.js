import{S as ee,i as te,s as se,k as d,a as E,q as C,l as _,m as g,h as u,c as I,r as N,n as h,b as G,D as s,u as K,B as X,I as x,J as ae,K as le,f as O,t as J,d as ne,L as ce,w as R,x as U,y as Z,z as F,M as ue,g as ie}from"../../chunks/index-84025daa.js";function he(a){let e,t,i,n,f,r,S,D,m,l,o,w,q,H,c,v,V,y,k,b,z,B,T,W,$,L,Y,A;return{c(){e=d("div"),t=d("div"),i=d("div"),n=E(),f=d("div"),r=E(),S=d("div"),D=E(),m=d("div"),l=E(),o=d("div"),w=E(),q=d("div"),H=E(),c=d("div"),v=E(),V=d("div"),y=E(),k=d("div"),b=E(),z=d("div"),B=E(),T=d("div"),W=E(),$=d("div"),L=E(),Y=d("p"),A=C(a[0]),this.h()},l(P){e=_(P,"DIV",{class:!0});var M=g(e);t=_(M,"DIV",{class:!0});var p=g(t);i=_(p,"DIV",{class:!0}),g(i).forEach(u),n=I(p),f=_(p,"DIV",{class:!0}),g(f).forEach(u),r=I(p),S=_(p,"DIV",{class:!0}),g(S).forEach(u),D=I(p),m=_(p,"DIV",{class:!0}),g(m).forEach(u),l=I(p),o=_(p,"DIV",{class:!0}),g(o).forEach(u),w=I(p),q=_(p,"DIV",{class:!0}),g(q).forEach(u),H=I(p),c=_(p,"DIV",{class:!0}),g(c).forEach(u),v=I(p),V=_(p,"DIV",{class:!0}),g(V).forEach(u),y=I(p),k=_(p,"DIV",{class:!0}),g(k).forEach(u),b=I(p),z=_(p,"DIV",{class:!0}),g(z).forEach(u),B=I(p),T=_(p,"DIV",{class:!0}),g(T).forEach(u),W=I(p),$=_(p,"DIV",{class:!0}),g($).forEach(u),p.forEach(u),L=I(M),Y=_(M,"P",{});var j=g(Y);A=N(j,a[0]),j.forEach(u),M.forEach(u),this.h()},h(){h(i,"class","svelte-1aehays"),h(f,"class","svelte-1aehays"),h(S,"class","svelte-1aehays"),h(m,"class","svelte-1aehays"),h(o,"class","svelte-1aehays"),h(q,"class","svelte-1aehays"),h(c,"class","svelte-1aehays"),h(V,"class","svelte-1aehays"),h(k,"class","svelte-1aehays"),h(z,"class","svelte-1aehays"),h(T,"class","svelte-1aehays"),h($,"class","svelte-1aehays"),h(t,"class","spinner svelte-1aehays"),h(e,"class","container svelte-1aehays")},m(P,M){G(P,e,M),s(e,t),s(t,i),s(t,n),s(t,f),s(t,r),s(t,S),s(t,D),s(t,m),s(t,l),s(t,o),s(t,w),s(t,q),s(t,H),s(t,c),s(t,v),s(t,V),s(t,y),s(t,k),s(t,b),s(t,z),s(t,B),s(t,T),s(t,W),s(t,$),s(e,L),s(e,Y),s(Y,A)},p(P,[M]){M&1&&K(A,P[0])},i:X,o:X,d(P){P&&u(e)}}}function fe(a,e,t){let{text:i="Loading..."}=e;return a.$$set=n=>{"text"in n&&t(0,i=n.text)},[i]}class ve extends ee{constructor(e){super(),te(this,e,fe,he,se,{text:0})}}function me(a){let e,t,i=a[2](a[1])+"",n,f,r,S,D,m,l,o=a[0][a[2](a[1])].missingHours+"",w,q,H,c,v=a[0][a[2](a[1])].missingMinutes+"",V,y,k,b,z=a[0][a[2](a[1])].missingMinutes/20+"",B,T,W;return{c(){e=d("div"),t=d("h3"),n=C(i),f=E(),r=d("div"),S=d("h4"),D=C("Missing time:"),m=E(),l=d("h4"),w=C(o),q=C(" hours"),H=E(),c=d("h4"),V=C(v),y=C(" minutes"),k=E(),b=d("h4"),B=C(z),T=C(" chapters"),this.h()},l($){e=_($,"DIV",{class:!0});var L=g(e);t=_(L,"H3",{class:!0});var Y=g(t);n=N(Y,i),Y.forEach(u),f=I(L),r=_(L,"DIV",{class:!0});var A=g(r);S=_(A,"H4",{class:!0});var P=g(S);D=N(P,"Missing time:"),P.forEach(u),m=I(A),l=_(A,"H4",{class:!0});var M=g(l);w=N(M,o),q=N(M," hours"),M.forEach(u),H=I(A),c=_(A,"H4",{class:!0});var p=g(c);V=N(p,v),y=N(p," minutes"),p.forEach(u),k=I(A),b=_(A,"H4",{class:!0});var j=g(b);B=N(j,z),T=N(j," chapters"),j.forEach(u),A.forEach(u),L.forEach(u),this.h()},h(){h(t,"class","title svelte-yql3zl"),h(S,"class","svelte-yql3zl"),h(l,"class","svelte-yql3zl"),h(c,"class","svelte-yql3zl"),h(b,"class","svelte-yql3zl"),h(r,"class",x("hours-container")+" svelte-yql3zl"),h(e,"class",W=x(`rectangulo ${a[2](a[1]).toLocaleLowerCase().replaceAll(" ","-")}`)+" svelte-yql3zl")},m($,L){G($,e,L),s(e,t),s(t,n),s(e,f),s(e,r),s(r,S),s(S,D),s(r,m),s(r,l),s(l,w),s(l,q),s(r,H),s(r,c),s(c,V),s(c,y),s(r,k),s(r,b),s(b,B),s(b,T)},p($,[L]){L&2&&i!==(i=$[2]($[1])+"")&&K(n,i),L&3&&o!==(o=$[0][$[2]($[1])].missingHours+"")&&K(w,o),L&3&&v!==(v=$[0][$[2]($[1])].missingMinutes+"")&&K(V,v),L&3&&z!==(z=$[0][$[2]($[1])].missingMinutes/20+"")&&K(B,z),L&2&&W!==(W=x(`rectangulo ${$[2]($[1]).toLocaleLowerCase().replaceAll(" ","-")}`)+" svelte-yql3zl")&&h(e,"class",W)},i:X,o:X,d($){$&&u(e)}}}function de(a,e,t){let{stats:i}=e,{section:n}=e;const f=r=>{switch(r){case 1:return"Watching";case 2:return"Completed";case 3:return"On Hold";case 4:return"Dropped";case 6:return"Plan to Watch";case 7:return"All Anime"}};return a.$$set=r=>{"stats"in r&&t(0,i=r.stats),"section"in r&&t(1,n=r.section)},[i,n,f]}class Q extends ee{constructor(e){super(),te(this,e,de,me,se,{stats:0,section:1})}}function re(a){let e,t,i;return t=new ve({}),{c(){e=d("div"),R(t.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var f=g(e);U(t.$$.fragment,f),f.forEach(u),this.h()},h(){h(e,"class","spinner svelte-qp7u2n")},m(n,f){G(n,e,f),Z(t,e,null),i=!0},i(n){i||(O(t.$$.fragment,n),i=!0)},o(n){J(t.$$.fragment,n),i=!1},d(n){n&&u(e),F(t)}}}function oe(a){let e,t,i,n,f,r,S,D,m;return t=new Q({props:{stats:a[1],section:1}}),n=new Q({props:{stats:a[1],section:3}}),r=new Q({props:{stats:a[1],section:4}}),D=new Q({props:{stats:a[1],section:6}}),{c(){e=d("div"),R(t.$$.fragment),i=E(),R(n.$$.fragment),f=E(),R(r.$$.fragment),S=E(),R(D.$$.fragment),this.h()},l(l){e=_(l,"DIV",{class:!0});var o=g(e);U(t.$$.fragment,o),i=I(o),U(n.$$.fragment,o),f=I(o),U(r.$$.fragment,o),S=I(o),U(D.$$.fragment,o),o.forEach(u),this.h()},h(){h(e,"class","stats-container svelte-qp7u2n")},m(l,o){G(l,e,o),Z(t,e,null),s(e,i),Z(n,e,null),s(e,f),Z(r,e,null),s(e,S),Z(D,e,null),m=!0},p(l,o){const w={};o&2&&(w.stats=l[1]),t.$set(w);const q={};o&2&&(q.stats=l[1]),n.$set(q);const H={};o&2&&(H.stats=l[1]),r.$set(H);const c={};o&2&&(c.stats=l[1]),D.$set(c)},i(l){m||(O(t.$$.fragment,l),O(n.$$.fragment,l),O(r.$$.fragment,l),O(D.$$.fragment,l),m=!0)},o(l){J(t.$$.fragment,l),J(n.$$.fragment,l),J(r.$$.fragment,l),J(D.$$.fragment,l),m=!1},d(l){l&&u(e),F(t),F(n),F(r),F(D)}}}function _e(a){let e,t,i,n,f,r,S,D,m,l,o,w,q,H,c=a[0].waiting&&re(),v=a[1]&&!a[0].waiting&&oe(a);return{c(){e=d("section"),t=d("h1"),i=C("AnimeList Stats"),n=E(),f=d("div"),r=d("label"),S=C("Your myanimelist url:"),D=E(),m=d("input"),l=E(),c&&c.c(),o=E(),v&&v.c(),this.h()},l(V){e=_(V,"SECTION",{class:!0});var y=g(e);t=_(y,"H1",{class:!0});var k=g(t);i=N(k,"AnimeList Stats"),k.forEach(u),n=I(y),f=_(y,"DIV",{class:!0});var b=g(f);r=_(b,"LABEL",{for:!0});var z=g(r);S=N(z,"Your myanimelist url:"),z.forEach(u),D=I(b),m=_(b,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),b.forEach(u),l=I(y),c&&c.l(y),o=I(y),v&&v.l(y),y.forEach(u),this.h()},h(){h(t,"class","svelte-qp7u2n"),h(r,"for","search"),h(m,"type","text"),h(m,"name","search"),h(m,"placeholder","https://myanimelist.net/animelist/username"),h(m,"class","svelte-qp7u2n"),h(f,"class","search-container svelte-qp7u2n"),h(e,"class","svelte-qp7u2n")},m(V,y){G(V,e,y),s(e,t),s(t,i),s(e,n),s(e,f),s(f,r),s(r,S),s(f,D),s(f,m),ae(m,a[0].value),s(e,l),c&&c.m(e,null),s(e,o),v&&v.m(e,null),w=!0,q||(H=[le(m,"input",a[3]),le(m,"keyup",function(){ue(a[2](a[0]))&&a[2](a[0]).apply(this,arguments)})],q=!0)},p(V,[y]){a=V,y&1&&m.value!==a[0].value&&ae(m,a[0].value),a[0].waiting?c?y&1&&O(c,1):(c=re(),c.c(),O(c,1),c.m(e,o)):c&&(ie(),J(c,1,1,()=>{c=null}),ne()),a[1]&&!a[0].waiting?v?(v.p(a,y),y&3&&O(v,1)):(v=oe(a),v.c(),O(v,1),v.m(e,null)):v&&(ie(),J(v,1,1,()=>{v=null}),ne())},i(V){w||(O(c),O(v),w=!0)},o(V){J(c),J(v),w=!1},d(V){V&&u(e),c&&c.d(),v&&v.d(),q=!1,ce(H)}}}function pe(a,e,t){let i={value:"",waiting:!1},n=null;const f=new RegExp(/^(https:\/\/myanimelist.net\/animelist\/)([a-zA-Z0-9]+)/),D=((l,o=0)=>{let w;return function(...q){clearTimeout(w),w=setTimeout(()=>l.apply(this,q),o)}})(()=>{f.test(i.value)&&(t(0,i.waiting=!0,i),fetch(`${window.location.href}api?anime=${i.value}`).then(l=>l.json()).then(l=>{t(1,n=l);const o=new Date().toLocaleString("es-ES",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}),w=JSON.parse(localStorage.getItem("stats"))||[];w.push({stats:n,date:o}),localStorage.setItem("stats",JSON.stringify(w)),t(0,i.waiting=!1,i)}))},1e3);function m(){i.value=this.value,t(0,i)}return[i,n,D,m]}class $e extends ee{constructor(e){super(),te(this,e,pe,_e,se,{})}}export{$e as default};
