import{S as ee,i as te,s as se,k as d,a as E,q as C,l as _,m as g,h as u,c as I,r as N,n as h,b as G,D as s,u as K,B as X,I as x,J as ae,K as le,f as P,t as O,d as ne,L as ce,w as R,x as U,y as Z,z as F,M as ue,g as ie}from"../../chunks/index-84025daa.js";function he(a){let e,t,i,l,f,n,D,S,m,r,o,V,w,z,c,v,q,y,k,b,H,B,j,J,$,L,W,A;return{c(){e=d("div"),t=d("div"),i=d("div"),l=E(),f=d("div"),n=E(),D=d("div"),S=E(),m=d("div"),r=E(),o=d("div"),V=E(),w=d("div"),z=E(),c=d("div"),v=E(),q=d("div"),y=E(),k=d("div"),b=E(),H=d("div"),B=E(),j=d("div"),J=E(),$=d("div"),L=E(),W=d("p"),A=C(a[0]),this.h()},l(T){e=_(T,"DIV",{class:!0});var M=g(e);t=_(M,"DIV",{class:!0});var p=g(t);i=_(p,"DIV",{class:!0}),g(i).forEach(u),l=I(p),f=_(p,"DIV",{class:!0}),g(f).forEach(u),n=I(p),D=_(p,"DIV",{class:!0}),g(D).forEach(u),S=I(p),m=_(p,"DIV",{class:!0}),g(m).forEach(u),r=I(p),o=_(p,"DIV",{class:!0}),g(o).forEach(u),V=I(p),w=_(p,"DIV",{class:!0}),g(w).forEach(u),z=I(p),c=_(p,"DIV",{class:!0}),g(c).forEach(u),v=I(p),q=_(p,"DIV",{class:!0}),g(q).forEach(u),y=I(p),k=_(p,"DIV",{class:!0}),g(k).forEach(u),b=I(p),H=_(p,"DIV",{class:!0}),g(H).forEach(u),B=I(p),j=_(p,"DIV",{class:!0}),g(j).forEach(u),J=I(p),$=_(p,"DIV",{class:!0}),g($).forEach(u),p.forEach(u),L=I(M),W=_(M,"P",{});var Y=g(W);A=N(Y,a[0]),Y.forEach(u),M.forEach(u),this.h()},h(){h(i,"class","svelte-1aehays"),h(f,"class","svelte-1aehays"),h(D,"class","svelte-1aehays"),h(m,"class","svelte-1aehays"),h(o,"class","svelte-1aehays"),h(w,"class","svelte-1aehays"),h(c,"class","svelte-1aehays"),h(q,"class","svelte-1aehays"),h(k,"class","svelte-1aehays"),h(H,"class","svelte-1aehays"),h(j,"class","svelte-1aehays"),h($,"class","svelte-1aehays"),h(t,"class","spinner svelte-1aehays"),h(e,"class","container svelte-1aehays")},m(T,M){G(T,e,M),s(e,t),s(t,i),s(t,l),s(t,f),s(t,n),s(t,D),s(t,S),s(t,m),s(t,r),s(t,o),s(t,V),s(t,w),s(t,z),s(t,c),s(t,v),s(t,q),s(t,y),s(t,k),s(t,b),s(t,H),s(t,B),s(t,j),s(t,J),s(t,$),s(e,L),s(e,W),s(W,A)},p(T,[M]){M&1&&K(A,T[0])},i:X,o:X,d(T){T&&u(e)}}}function fe(a,e,t){let{text:i="Loading..."}=e;return a.$$set=l=>{"text"in l&&t(0,i=l.text)},[i]}class ve extends ee{constructor(e){super(),te(this,e,fe,he,se,{text:0})}}function me(a){let e,t,i=a[2](a[1])+"",l,f,n,D,S,m,r,o=a[0][a[2](a[1])].missingHours+"",V,w,z,c,v=a[0][a[2](a[1])].missingMinutes+"",q,y,k,b,H=a[0][a[2](a[1])].missingMinutes/20+"",B,j,J;return{c(){e=d("div"),t=d("h3"),l=C(i),f=E(),n=d("div"),D=d("h4"),S=C("Missing time:"),m=E(),r=d("h4"),V=C(o),w=C(" hours"),z=E(),c=d("h4"),q=C(v),y=C(" minutes"),k=E(),b=d("h4"),B=C(H),j=C(" chapters"),this.h()},l($){e=_($,"DIV",{class:!0});var L=g(e);t=_(L,"H3",{class:!0});var W=g(t);l=N(W,i),W.forEach(u),f=I(L),n=_(L,"DIV",{class:!0});var A=g(n);D=_(A,"H4",{class:!0});var T=g(D);S=N(T,"Missing time:"),T.forEach(u),m=I(A),r=_(A,"H4",{class:!0});var M=g(r);V=N(M,o),w=N(M," hours"),M.forEach(u),z=I(A),c=_(A,"H4",{class:!0});var p=g(c);q=N(p,v),y=N(p," minutes"),p.forEach(u),k=I(A),b=_(A,"H4",{class:!0});var Y=g(b);B=N(Y,H),j=N(Y," chapters"),Y.forEach(u),A.forEach(u),L.forEach(u),this.h()},h(){h(t,"class","title svelte-yql3zl"),h(D,"class","svelte-yql3zl"),h(r,"class","svelte-yql3zl"),h(c,"class","svelte-yql3zl"),h(b,"class","svelte-yql3zl"),h(n,"class",x("hours-container")+" svelte-yql3zl"),h(e,"class",J=x(`rectangulo ${a[2](a[1]).toLocaleLowerCase().replaceAll(" ","-")}`)+" svelte-yql3zl")},m($,L){G($,e,L),s(e,t),s(t,l),s(e,f),s(e,n),s(n,D),s(D,S),s(n,m),s(n,r),s(r,V),s(r,w),s(n,z),s(n,c),s(c,q),s(c,y),s(n,k),s(n,b),s(b,B),s(b,j)},p($,[L]){L&2&&i!==(i=$[2]($[1])+"")&&K(l,i),L&3&&o!==(o=$[0][$[2]($[1])].missingHours+"")&&K(V,o),L&3&&v!==(v=$[0][$[2]($[1])].missingMinutes+"")&&K(q,v),L&3&&H!==(H=$[0][$[2]($[1])].missingMinutes/20+"")&&K(B,H),L&2&&J!==(J=x(`rectangulo ${$[2]($[1]).toLocaleLowerCase().replaceAll(" ","-")}`)+" svelte-yql3zl")&&h(e,"class",J)},i:X,o:X,d($){$&&u(e)}}}function de(a,e,t){let{stats:i}=e,{section:l}=e;const f=n=>{switch(n){case 1:return"Watching";case 2:return"Completed";case 3:return"On Hold";case 4:return"Dropped";case 6:return"Plan to Watch";case 7:return"All Anime"}};return a.$$set=n=>{"stats"in n&&t(0,i=n.stats),"section"in n&&t(1,l=n.section)},[i,l,f]}class Q extends ee{constructor(e){super(),te(this,e,de,me,se,{stats:0,section:1})}}function re(a){let e,t,i;return t=new ve({}),{c(){e=d("div"),R(t.$$.fragment),this.h()},l(l){e=_(l,"DIV",{class:!0});var f=g(e);U(t.$$.fragment,f),f.forEach(u),this.h()},h(){h(e,"class","spinner svelte-qp7u2n")},m(l,f){G(l,e,f),Z(t,e,null),i=!0},i(l){i||(P(t.$$.fragment,l),i=!0)},o(l){O(t.$$.fragment,l),i=!1},d(l){l&&u(e),F(t)}}}function oe(a){let e,t,i,l,f,n,D,S,m;return t=new Q({props:{stats:a[1],section:1}}),l=new Q({props:{stats:a[1],section:3}}),n=new Q({props:{stats:a[1],section:4}}),S=new Q({props:{stats:a[1],section:6}}),{c(){e=d("div"),R(t.$$.fragment),i=E(),R(l.$$.fragment),f=E(),R(n.$$.fragment),D=E(),R(S.$$.fragment),this.h()},l(r){e=_(r,"DIV",{class:!0});var o=g(e);U(t.$$.fragment,o),i=I(o),U(l.$$.fragment,o),f=I(o),U(n.$$.fragment,o),D=I(o),U(S.$$.fragment,o),o.forEach(u),this.h()},h(){h(e,"class","stats-container svelte-qp7u2n")},m(r,o){G(r,e,o),Z(t,e,null),s(e,i),Z(l,e,null),s(e,f),Z(n,e,null),s(e,D),Z(S,e,null),m=!0},p(r,o){const V={};o&2&&(V.stats=r[1]),t.$set(V);const w={};o&2&&(w.stats=r[1]),l.$set(w);const z={};o&2&&(z.stats=r[1]),n.$set(z);const c={};o&2&&(c.stats=r[1]),S.$set(c)},i(r){m||(P(t.$$.fragment,r),P(l.$$.fragment,r),P(n.$$.fragment,r),P(S.$$.fragment,r),m=!0)},o(r){O(t.$$.fragment,r),O(l.$$.fragment,r),O(n.$$.fragment,r),O(S.$$.fragment,r),m=!1},d(r){r&&u(e),F(t),F(l),F(n),F(S)}}}function _e(a){let e,t,i,l,f,n,D,S,m,r,o,V,w,z,c=a[0].waiting&&re(),v=a[1]&&!a[0].waiting&&oe(a);return{c(){e=d("section"),t=d("h1"),i=C("AnimeList Stats"),l=E(),f=d("div"),n=d("label"),D=C("Your myanimelist url:"),S=E(),m=d("input"),r=E(),c&&c.c(),o=E(),v&&v.c(),this.h()},l(q){e=_(q,"SECTION",{class:!0});var y=g(e);t=_(y,"H1",{class:!0});var k=g(t);i=N(k,"AnimeList Stats"),k.forEach(u),l=I(y),f=_(y,"DIV",{class:!0});var b=g(f);n=_(b,"LABEL",{for:!0});var H=g(n);D=N(H,"Your myanimelist url:"),H.forEach(u),S=I(b),m=_(b,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),b.forEach(u),r=I(y),c&&c.l(y),o=I(y),v&&v.l(y),y.forEach(u),this.h()},h(){h(t,"class","svelte-qp7u2n"),h(n,"for","search"),h(m,"type","text"),h(m,"name","search"),h(m,"placeholder","https://myanimelist.net/animelist/username"),h(m,"class","svelte-qp7u2n"),h(f,"class","search-container svelte-qp7u2n"),h(e,"class","svelte-qp7u2n")},m(q,y){G(q,e,y),s(e,t),s(t,i),s(e,l),s(e,f),s(f,n),s(n,D),s(f,S),s(f,m),ae(m,a[0].value),s(e,r),c&&c.m(e,null),s(e,o),v&&v.m(e,null),V=!0,w||(z=[le(m,"input",a[3]),le(m,"keyup",function(){ue(a[2](a[0]))&&a[2](a[0]).apply(this,arguments)})],w=!0)},p(q,[y]){a=q,y&1&&m.value!==a[0].value&&ae(m,a[0].value),a[0].waiting?c?y&1&&P(c,1):(c=re(),c.c(),P(c,1),c.m(e,o)):c&&(ie(),O(c,1,1,()=>{c=null}),ne()),a[1]&&!a[0].waiting?v?(v.p(a,y),y&3&&P(v,1)):(v=oe(a),v.c(),P(v,1),v.m(e,null)):v&&(ie(),O(v,1,1,()=>{v=null}),ne())},i(q){V||(P(c),P(v),V=!0)},o(q){O(c),O(v),V=!1},d(q){q&&u(e),c&&c.d(),v&&v.d(),w=!1,ce(z)}}}function pe(a,e,t){let i={value:"",waiting:!1},l=null;const f="https://myanimelist-stats-jjor.onrender.com/api",n=new RegExp(/^(https:\/\/myanimelist.net\/animelist\/)([a-zA-Z0-9]+)/),m=((o,V=0)=>{let w;return function(...z){clearTimeout(w),w=setTimeout(()=>o.apply(this,z),V)}})(()=>{n.test(i.value)&&(t(0,i.waiting=!0,i),fetch(`${f}?anime=${i.value}`).then(o=>o.json()).then(o=>{t(1,l=o);const V=new Date().toLocaleString("es-ES",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"});(JSON.parse(localStorage.getItem("stats"))||[]).push({stats:l,date:V}),t(0,i.waiting=!1,i)}))},1e3);function r(){i.value=this.value,t(0,i)}return[i,l,m,r]}class $e extends ee{constructor(e){super(),te(this,e,pe,_e,se,{})}}export{$e as default};
