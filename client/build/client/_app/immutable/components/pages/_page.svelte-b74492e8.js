import{S as ee,i as te,s as se,k as d,a as E,q as C,l as _,m as g,h as u,c as I,r as P,n as h,b as G,D as s,u as K,B as X,I as x,J as ae,K as le,f as T,t as O,d as ne,L as oe,w as R,x as U,y as Z,z as F,M as ue,g as ie}from"../../chunks/index-84025daa.js";function he(a){let e,t,n,i,f,r,V,D,m,l,o,q,S,H,c,v,w,y,A,b,L,W,B,Y,$,z,j,k;return{c(){e=d("div"),t=d("div"),n=d("div"),i=E(),f=d("div"),r=E(),V=d("div"),D=E(),m=d("div"),l=E(),o=d("div"),q=E(),S=d("div"),H=E(),c=d("div"),v=E(),w=d("div"),y=E(),A=d("div"),b=E(),L=d("div"),W=E(),B=d("div"),Y=E(),$=d("div"),z=E(),j=d("p"),k=C(a[0]),this.h()},l(N){e=_(N,"DIV",{class:!0});var M=g(e);t=_(M,"DIV",{class:!0});var p=g(t);n=_(p,"DIV",{class:!0}),g(n).forEach(u),i=I(p),f=_(p,"DIV",{class:!0}),g(f).forEach(u),r=I(p),V=_(p,"DIV",{class:!0}),g(V).forEach(u),D=I(p),m=_(p,"DIV",{class:!0}),g(m).forEach(u),l=I(p),o=_(p,"DIV",{class:!0}),g(o).forEach(u),q=I(p),S=_(p,"DIV",{class:!0}),g(S).forEach(u),H=I(p),c=_(p,"DIV",{class:!0}),g(c).forEach(u),v=I(p),w=_(p,"DIV",{class:!0}),g(w).forEach(u),y=I(p),A=_(p,"DIV",{class:!0}),g(A).forEach(u),b=I(p),L=_(p,"DIV",{class:!0}),g(L).forEach(u),W=I(p),B=_(p,"DIV",{class:!0}),g(B).forEach(u),Y=I(p),$=_(p,"DIV",{class:!0}),g($).forEach(u),p.forEach(u),z=I(M),j=_(M,"P",{});var J=g(j);k=P(J,a[0]),J.forEach(u),M.forEach(u),this.h()},h(){h(n,"class","svelte-1aehays"),h(f,"class","svelte-1aehays"),h(V,"class","svelte-1aehays"),h(m,"class","svelte-1aehays"),h(o,"class","svelte-1aehays"),h(S,"class","svelte-1aehays"),h(c,"class","svelte-1aehays"),h(w,"class","svelte-1aehays"),h(A,"class","svelte-1aehays"),h(L,"class","svelte-1aehays"),h(B,"class","svelte-1aehays"),h($,"class","svelte-1aehays"),h(t,"class","spinner svelte-1aehays"),h(e,"class","container svelte-1aehays")},m(N,M){G(N,e,M),s(e,t),s(t,n),s(t,i),s(t,f),s(t,r),s(t,V),s(t,D),s(t,m),s(t,l),s(t,o),s(t,q),s(t,S),s(t,H),s(t,c),s(t,v),s(t,w),s(t,y),s(t,A),s(t,b),s(t,L),s(t,W),s(t,B),s(t,Y),s(t,$),s(e,z),s(e,j),s(j,k)},p(N,[M]){M&1&&K(k,N[0])},i:X,o:X,d(N){N&&u(e)}}}function fe(a,e,t){let{text:n="Loading..."}=e;return a.$$set=i=>{"text"in i&&t(0,n=i.text)},[n]}class ve extends ee{constructor(e){super(),te(this,e,fe,he,se,{text:0})}}function me(a){let e,t,n=a[2](a[1])+"",i,f,r,V,D,m,l,o=a[0][a[2](a[1])].missingHours+"",q,S,H,c,v=a[0][a[2](a[1])].missingMinutes+"",w,y,A,b,L=a[0][a[2](a[1])].missingMinutes/20+"",W,B,Y;return{c(){e=d("div"),t=d("h3"),i=C(n),f=E(),r=d("div"),V=d("h4"),D=C("Missing time:"),m=E(),l=d("h4"),q=C(o),S=C(" hours"),H=E(),c=d("h4"),w=C(v),y=C(" minutes"),A=E(),b=d("h4"),W=C(L),B=C(" chapters"),this.h()},l($){e=_($,"DIV",{class:!0});var z=g(e);t=_(z,"H3",{class:!0});var j=g(t);i=P(j,n),j.forEach(u),f=I(z),r=_(z,"DIV",{class:!0});var k=g(r);V=_(k,"H4",{class:!0});var N=g(V);D=P(N,"Missing time:"),N.forEach(u),m=I(k),l=_(k,"H4",{class:!0});var M=g(l);q=P(M,o),S=P(M," hours"),M.forEach(u),H=I(k),c=_(k,"H4",{class:!0});var p=g(c);w=P(p,v),y=P(p," minutes"),p.forEach(u),A=I(k),b=_(k,"H4",{class:!0});var J=g(b);W=P(J,L),B=P(J," chapters"),J.forEach(u),k.forEach(u),z.forEach(u),this.h()},h(){h(t,"class","title svelte-yql3zl"),h(V,"class","svelte-yql3zl"),h(l,"class","svelte-yql3zl"),h(c,"class","svelte-yql3zl"),h(b,"class","svelte-yql3zl"),h(r,"class",x("hours-container")+" svelte-yql3zl"),h(e,"class",Y=x(`rectangulo ${a[2](a[1]).toLocaleLowerCase().replaceAll(" ","-")}`)+" svelte-yql3zl")},m($,z){G($,e,z),s(e,t),s(t,i),s(e,f),s(e,r),s(r,V),s(V,D),s(r,m),s(r,l),s(l,q),s(l,S),s(r,H),s(r,c),s(c,w),s(c,y),s(r,A),s(r,b),s(b,W),s(b,B)},p($,[z]){z&2&&n!==(n=$[2]($[1])+"")&&K(i,n),z&3&&o!==(o=$[0][$[2]($[1])].missingHours+"")&&K(q,o),z&3&&v!==(v=$[0][$[2]($[1])].missingMinutes+"")&&K(w,v),z&3&&L!==(L=$[0][$[2]($[1])].missingMinutes/20+"")&&K(W,L),z&2&&Y!==(Y=x(`rectangulo ${$[2]($[1]).toLocaleLowerCase().replaceAll(" ","-")}`)+" svelte-yql3zl")&&h(e,"class",Y)},i:X,o:X,d($){$&&u(e)}}}function de(a,e,t){let{stats:n}=e,{section:i}=e;const f=r=>{switch(r){case 1:return"Watching";case 2:return"Completed";case 3:return"On Hold";case 4:return"Dropped";case 6:return"Plan to Watch";case 7:return"All Anime"}};return a.$$set=r=>{"stats"in r&&t(0,n=r.stats),"section"in r&&t(1,i=r.section)},[n,i,f]}class Q extends ee{constructor(e){super(),te(this,e,de,me,se,{stats:0,section:1})}}function re(a){let e,t,n;return t=new ve({}),{c(){e=d("div"),R(t.$$.fragment),this.h()},l(i){e=_(i,"DIV",{class:!0});var f=g(e);U(t.$$.fragment,f),f.forEach(u),this.h()},h(){h(e,"class","spinner svelte-qp7u2n")},m(i,f){G(i,e,f),Z(t,e,null),n=!0},i(i){n||(T(t.$$.fragment,i),n=!0)},o(i){O(t.$$.fragment,i),n=!1},d(i){i&&u(e),F(t)}}}function ce(a){let e,t,n,i,f,r,V,D,m;return t=new Q({props:{stats:a[1],section:1}}),i=new Q({props:{stats:a[1],section:3}}),r=new Q({props:{stats:a[1],section:4}}),D=new Q({props:{stats:a[1],section:6}}),{c(){e=d("div"),R(t.$$.fragment),n=E(),R(i.$$.fragment),f=E(),R(r.$$.fragment),V=E(),R(D.$$.fragment),this.h()},l(l){e=_(l,"DIV",{class:!0});var o=g(e);U(t.$$.fragment,o),n=I(o),U(i.$$.fragment,o),f=I(o),U(r.$$.fragment,o),V=I(o),U(D.$$.fragment,o),o.forEach(u),this.h()},h(){h(e,"class","stats-container svelte-qp7u2n")},m(l,o){G(l,e,o),Z(t,e,null),s(e,n),Z(i,e,null),s(e,f),Z(r,e,null),s(e,V),Z(D,e,null),m=!0},p(l,o){const q={};o&2&&(q.stats=l[1]),t.$set(q);const S={};o&2&&(S.stats=l[1]),i.$set(S);const H={};o&2&&(H.stats=l[1]),r.$set(H);const c={};o&2&&(c.stats=l[1]),D.$set(c)},i(l){m||(T(t.$$.fragment,l),T(i.$$.fragment,l),T(r.$$.fragment,l),T(D.$$.fragment,l),m=!0)},o(l){O(t.$$.fragment,l),O(i.$$.fragment,l),O(r.$$.fragment,l),O(D.$$.fragment,l),m=!1},d(l){l&&u(e),F(t),F(i),F(r),F(D)}}}function _e(a){let e,t,n,i,f,r,V,D,m,l,o,q,S,H,c=a[0].waiting&&re(),v=a[1]&&!a[0].waiting&&ce(a);return{c(){e=d("section"),t=d("h1"),n=C("AnimeList Stats"),i=E(),f=d("div"),r=d("label"),V=C("Your myanimelist url:"),D=E(),m=d("input"),l=E(),c&&c.c(),o=E(),v&&v.c(),this.h()},l(w){e=_(w,"SECTION",{class:!0});var y=g(e);t=_(y,"H1",{class:!0});var A=g(t);n=P(A,"AnimeList Stats"),A.forEach(u),i=I(y),f=_(y,"DIV",{class:!0});var b=g(f);r=_(b,"LABEL",{for:!0});var L=g(r);V=P(L,"Your myanimelist url:"),L.forEach(u),D=I(b),m=_(b,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),b.forEach(u),l=I(y),c&&c.l(y),o=I(y),v&&v.l(y),y.forEach(u),this.h()},h(){h(t,"class","svelte-qp7u2n"),h(r,"for","search"),h(m,"type","text"),h(m,"name","search"),h(m,"placeholder","https://myanimelist.net/animelist/username"),h(m,"class","svelte-qp7u2n"),h(f,"class","search-container svelte-qp7u2n"),h(e,"class","svelte-qp7u2n")},m(w,y){G(w,e,y),s(e,t),s(t,n),s(e,i),s(e,f),s(f,r),s(r,V),s(f,D),s(f,m),ae(m,a[0].value),s(e,l),c&&c.m(e,null),s(e,o),v&&v.m(e,null),q=!0,S||(H=[le(m,"input",a[3]),le(m,"keyup",function(){ue(a[2](a[0]))&&a[2](a[0]).apply(this,arguments)})],S=!0)},p(w,[y]){a=w,y&1&&m.value!==a[0].value&&ae(m,a[0].value),a[0].waiting?c?y&1&&T(c,1):(c=re(),c.c(),T(c,1),c.m(e,o)):c&&(ie(),O(c,1,1,()=>{c=null}),ne()),a[1]&&!a[0].waiting?v?(v.p(a,y),y&3&&T(v,1)):(v=ce(a),v.c(),T(v,1),v.m(e,null)):v&&(ie(),O(v,1,1,()=>{v=null}),ne())},i(w){q||(T(c),T(v),q=!0)},o(w){O(c),O(v),q=!1},d(w){w&&u(e),c&&c.d(),v&&v.d(),S=!1,oe(H)}}}function pe(a,e,t){let n={value:"",waiting:!1},i=null;const f=new RegExp(/^(https:\/\/myanimelist.net\/animelist\/)([a-zA-Z0-9]+)/),D=((l,o=0)=>{let q;return function(...S){clearTimeout(q),q=setTimeout(()=>l.apply(this,S),o)}})(()=>{f.test(n.value)&&(t(0,n.waiting=!0,n),fetch(`https://my-anime-stats-backend.vercel.app/api?anime=${n.value}`).then(l=>l.json()).then(l=>{t(1,i=l),t(0,n.waiting=!1,n)}))},1e3);function m(){n.value=this.value,t(0,n)}return[n,i,D,m]}class $e extends ee{constructor(e){super(),te(this,e,pe,_e,se,{})}}export{$e as default};
