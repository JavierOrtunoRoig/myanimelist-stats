import{S as ee,i as te,s as se,k as v,a as D,q as C,l as d,m,h as r,c as S,r as O,n as u,b as K,D as s,u as j,B as Q,I as X,p as ae,J as le,K as ne,f as U,t as W,d as ie,L as ue,w as R,x as Z,y as F,z as G,g as re}from"../../chunks/index-e6e89573.js";function he(i){let t,e,n,a,f,l,I,c,o,_,q,w,H,P,z,b,L,B,p,h,E,$,M,A,g,V,T,k;return{c(){t=v("div"),e=v("div"),n=v("div"),a=D(),f=v("div"),l=D(),I=v("div"),c=D(),o=v("div"),_=D(),q=v("div"),w=D(),H=v("div"),P=D(),z=v("div"),b=D(),L=v("div"),B=D(),p=v("div"),h=D(),E=v("div"),$=D(),M=v("div"),A=D(),g=v("div"),V=D(),T=v("p"),k=C(i[0]),this.h()},l(J){t=d(J,"DIV",{class:!0});var N=m(t);e=d(N,"DIV",{class:!0});var y=m(e);n=d(y,"DIV",{class:!0}),m(n).forEach(r),a=S(y),f=d(y,"DIV",{class:!0}),m(f).forEach(r),l=S(y),I=d(y,"DIV",{class:!0}),m(I).forEach(r),c=S(y),o=d(y,"DIV",{class:!0}),m(o).forEach(r),_=S(y),q=d(y,"DIV",{class:!0}),m(q).forEach(r),w=S(y),H=d(y,"DIV",{class:!0}),m(H).forEach(r),P=S(y),z=d(y,"DIV",{class:!0}),m(z).forEach(r),b=S(y),L=d(y,"DIV",{class:!0}),m(L).forEach(r),B=S(y),p=d(y,"DIV",{class:!0}),m(p).forEach(r),h=S(y),E=d(y,"DIV",{class:!0}),m(E).forEach(r),$=S(y),M=d(y,"DIV",{class:!0}),m(M).forEach(r),A=S(y),g=d(y,"DIV",{class:!0}),m(g).forEach(r),y.forEach(r),V=S(N),T=d(N,"P",{});var Y=m(T);k=O(Y,i[0]),Y.forEach(r),N.forEach(r),this.h()},h(){u(n,"class","svelte-1aehays"),u(f,"class","svelte-1aehays"),u(I,"class","svelte-1aehays"),u(o,"class","svelte-1aehays"),u(q,"class","svelte-1aehays"),u(H,"class","svelte-1aehays"),u(z,"class","svelte-1aehays"),u(L,"class","svelte-1aehays"),u(p,"class","svelte-1aehays"),u(E,"class","svelte-1aehays"),u(M,"class","svelte-1aehays"),u(g,"class","svelte-1aehays"),u(e,"class","spinner svelte-1aehays"),u(t,"class","container svelte-1aehays")},m(J,N){K(J,t,N),s(t,e),s(e,n),s(e,a),s(e,f),s(e,l),s(e,I),s(e,c),s(e,o),s(e,_),s(e,q),s(e,w),s(e,H),s(e,P),s(e,z),s(e,b),s(e,L),s(e,B),s(e,p),s(e,h),s(e,E),s(e,$),s(e,M),s(e,A),s(e,g),s(t,V),s(t,T),s(T,k)},p(J,[N]){N&1&&j(k,J[0])},i:Q,o:Q,d(J){J&&r(t)}}}function fe(i,t,e){let{text:n="Loading..."}=t;return i.$$set=a=>{"text"in a&&e(0,n=a.text)},[n]}class ve extends ee{constructor(t){super(),te(this,t,fe,he,se,{text:0})}}function de(i){let t,e,n=i[2](i[1])+"",a,f,l,I,c,o,_,q=i[0][i[2](i[1])].missingHours+"",w,H,P,z,b=i[0][i[2](i[1])].missingMinutes+"",L,B,p,h,E=i[0][i[2](i[1])].missingMinutes/20+"",$,M,A;return{c(){t=v("div"),e=v("h3"),a=C(n),f=D(),l=v("div"),I=v("h4"),c=C("Missing time:"),o=D(),_=v("h4"),w=C(q),H=C(" hours"),P=D(),z=v("h4"),L=C(b),B=C(" minutes"),p=D(),h=v("h4"),$=C(E),M=C(" chapters"),this.h()},l(g){t=d(g,"DIV",{class:!0});var V=m(t);e=d(V,"H3",{class:!0});var T=m(e);a=O(T,n),T.forEach(r),f=S(V),l=d(V,"DIV",{class:!0});var k=m(l);I=d(k,"H4",{class:!0});var J=m(I);c=O(J,"Missing time:"),J.forEach(r),o=S(k),_=d(k,"H4",{class:!0});var N=m(_);w=O(N,q),H=O(N," hours"),N.forEach(r),P=S(k),z=d(k,"H4",{class:!0});var y=m(z);L=O(y,b),B=O(y," minutes"),y.forEach(r),p=S(k),h=d(k,"H4",{class:!0});var Y=m(h);$=O(Y,E),M=O(Y," chapters"),Y.forEach(r),k.forEach(r),V.forEach(r),this.h()},h(){u(e,"class","title svelte-yql3zl"),u(I,"class","svelte-yql3zl"),u(_,"class","svelte-yql3zl"),u(z,"class","svelte-yql3zl"),u(h,"class","svelte-yql3zl"),u(l,"class",X("hours-container")+" svelte-yql3zl"),u(t,"class",A=X(`rectangulo ${i[2](i[1]).toLocaleLowerCase().replaceAll(" ","-")}`)+" svelte-yql3zl")},m(g,V){K(g,t,V),s(t,e),s(e,a),s(t,f),s(t,l),s(l,I),s(I,c),s(l,o),s(l,_),s(_,w),s(_,H),s(l,P),s(l,z),s(z,L),s(z,B),s(l,p),s(l,h),s(h,$),s(h,M)},p(g,[V]){V&2&&n!==(n=g[2](g[1])+"")&&j(a,n),V&3&&q!==(q=g[0][g[2](g[1])].missingHours+"")&&j(w,q),V&3&&b!==(b=g[0][g[2](g[1])].missingMinutes+"")&&j(L,b),V&3&&E!==(E=g[0][g[2](g[1])].missingMinutes/20+"")&&j($,E),V&2&&A!==(A=X(`rectangulo ${g[2](g[1]).toLocaleLowerCase().replaceAll(" ","-")}`)+" svelte-yql3zl")&&u(t,"class",A)},i:Q,o:Q,d(g){g&&r(t)}}}function me(i,t,e){let{stats:n}=t,{section:a}=t;const f=l=>{switch(l){case 1:return"Watching";case 2:return"Completed";case 3:return"On Hold";case 4:return"Dropped";case 6:return"Plan to Watch";case 7:return"All Anime"}};return i.$$set=l=>{"stats"in l&&e(0,n=l.stats),"section"in l&&e(1,a=l.section)},[n,a,f]}class x extends ee{constructor(t){super(),te(this,t,me,de,se,{stats:0,section:1})}}function oe(i){let t,e,n;return e=new ve({}),{c(){t=v("div"),R(e.$$.fragment),this.h()},l(a){t=d(a,"DIV",{class:!0});var f=m(t);Z(e.$$.fragment,f),f.forEach(r),this.h()},h(){u(t,"class","spinner svelte-13zod5q")},m(a,f){K(a,t,f),F(e,t,null),n=!0},i(a){n||(U(e.$$.fragment,a),n=!0)},o(a){W(e.$$.fragment,a),n=!1},d(a){a&&r(t),G(e)}}}function ce(i){let t,e,n,a,f,l,I;return e=new x({props:{stats:i[1],section:1}}),a=new x({props:{stats:i[1],section:3}}),l=new x({props:{stats:i[1],section:6}}),{c(){t=v("div"),R(e.$$.fragment),n=D(),R(a.$$.fragment),f=D(),R(l.$$.fragment),this.h()},l(c){t=d(c,"DIV",{class:!0});var o=m(t);Z(e.$$.fragment,o),n=S(o),Z(a.$$.fragment,o),f=S(o),Z(l.$$.fragment,o),o.forEach(r),this.h()},h(){u(t,"class","stats-container svelte-13zod5q")},m(c,o){K(c,t,o),F(e,t,null),s(t,n),F(a,t,null),s(t,f),F(l,t,null),I=!0},p(c,o){const _={};o&2&&(_.stats=c[1]),e.$set(_);const q={};o&2&&(q.stats=c[1]),a.$set(q);const w={};o&2&&(w.stats=c[1]),l.$set(w)},i(c){I||(U(e.$$.fragment,c),U(a.$$.fragment,c),U(l.$$.fragment,c),I=!0)},o(c){W(e.$$.fragment,c),W(a.$$.fragment,c),W(l.$$.fragment,c),I=!1},d(c){c&&r(t),G(e),G(a),G(l)}}}function _e(i){let t,e,n,a,f,l,I,c,o,_,q,w,H,P,z,b,L,B,p=i[0].waiting&&oe(),h=i[1]&&!i[0].waiting&&ce(i);return{c(){t=v("section"),e=v("h1"),n=C("AnimeList Stats"),a=D(),f=v("div"),l=v("label"),I=C("Your myanimelist url:"),c=D(),o=v("div"),_=v("input"),q=D(),w=v("button"),H=C("Search"),P=D(),p&&p.c(),z=D(),h&&h.c(),this.h()},l(E){t=d(E,"SECTION",{class:!0});var $=m(t);e=d($,"H1",{class:!0});var M=m(e);n=O(M,"AnimeList Stats"),M.forEach(r),a=S($),f=d($,"DIV",{class:!0});var A=m(f);l=d(A,"LABEL",{for:!0});var g=m(l);I=O(g,"Your myanimelist url:"),g.forEach(r),c=S(A),o=d(A,"DIV",{style:!0});var V=m(o);_=d(V,"INPUT",{type:!0,name:!0,placeholder:!0,class:!0}),q=S(V),w=d(V,"BUTTON",{class:!0});var T=m(w);H=O(T,"Search"),T.forEach(r),V.forEach(r),A.forEach(r),P=S($),p&&p.l($),z=S($),h&&h.l($),$.forEach(r),this.h()},h(){u(e,"class","svelte-13zod5q"),u(l,"for","search"),u(_,"type","text"),u(_,"name","search"),u(_,"placeholder","https://myanimelist.net/animelist/username"),u(_,"class","svelte-13zod5q"),u(w,"class","svelte-13zod5q"),ae(o,"display","flex"),ae(o,"gap","5px"),u(f,"class","search-container svelte-13zod5q"),u(t,"class","svelte-13zod5q")},m(E,$){K(E,t,$),s(t,e),s(e,n),s(t,a),s(t,f),s(f,l),s(l,I),s(f,c),s(f,o),s(o,_),le(_,i[0].value),s(o,q),s(o,w),s(w,H),s(t,P),p&&p.m(t,null),s(t,z),h&&h.m(t,null),b=!0,L||(B=[ne(_,"input",i[3]),ne(w,"click",i[2])],L=!0)},p(E,[$]){$&1&&_.value!==E[0].value&&le(_,E[0].value),E[0].waiting?p?$&1&&U(p,1):(p=oe(),p.c(),U(p,1),p.m(t,z)):p&&(re(),W(p,1,1,()=>{p=null}),ie()),E[1]&&!E[0].waiting?h?(h.p(E,$),$&3&&U(h,1)):(h=ce(E),h.c(),U(h,1),h.m(t,null)):h&&(re(),W(h,1,1,()=>{h=null}),ie())},i(E){b||(U(p),U(h),b=!0)},o(E){W(p),W(h),b=!1},d(E){E&&r(t),p&&p.d(),h&&h.d(),L=!1,ue(B)}}}function pe(i,t,e){let n={value:"",waiting:!1},a=null;const f=new RegExp(/^(https:\/\/myanimelist.net\/animelist\/)([a-zA-Z0-9]+)/),l=()=>{f.test(n.value)&&(e(0,n.waiting=!0,n),fetch(`${window.location.href}api?anime=${n.value}`).then(c=>c.json()).then(c=>{e(1,a=c);const o=new Date().toLocaleString("es-ES",{day:"numeric",month:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}),_=JSON.parse(localStorage.getItem("stats"))||[];_.push({stats:a,date:o}),localStorage.setItem("stats",JSON.stringify(_)),e(0,n.waiting=!1,n)}))};function I(){n.value=this.value,e(0,n)}return[n,a,l,I]}class ye extends ee{constructor(t){super(),te(this,t,pe,_e,se,{})}}export{ye as default};
